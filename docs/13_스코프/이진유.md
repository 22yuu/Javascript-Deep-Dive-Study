# 13장 스코프

### 1. 스코프란?

- 스코프는 식별자가 유효한 범위를 말한다.
- 스코프 내에서 식별자는 유일해야 한다.
- 다른 스코프에는 같은 이름의 식별자를 사용할 수 있다.
- 스코프는 네임스페이스다.

### 2. 스코프의 종류

- 전역 스코프 : 전역에서 선언된 변수, 어디서든지 참조할 수 있다.
- 지역 스코프 : 지역에서 선언된 변수, 자신의 지역 스코프와 하위 지역 스코프에서 유효하다.

### 3. 스코프 체인

- 함수 몸체 내부에 함수가 정의된 것을 "함수의 중첩"이라 한다.
- 함수는 중첩될 수 있으므로 함수의 지역 스코프도 중첩될 수 있으며 이는 스코프가 함수의 중첩에 의해 계층적 구조를 갖는다는 것이다.
- 이처럼 스코프가 계층적으로 연결된 것을 **스코프 체인**이라 한다.

### 4. 함수 레벨 스코프

- 코드 블록이 아닌 함수에 의해서만 지역 스코프가 생성된다.
- `var` 키워드로 선언된 변수는 오로지 함수의 코드 블록(함수 몸체)만을 지역 스코프로 인정한다.
- 이러한 특성을 **함수 레벨 스코프**라고 한다.

```js
var x = 1;

if (true) {
  // var 키워드로 선언된 변수는 함수의 코드 블록(함수 몸체)만을 지역 스코프로 인정한다.
  // 함수 밖에서 var 키워드로 선언된 변수는 코드 블록 내에서 선언되었다 할지라도 모두 전역 변수다.
  // 따라서 x는 전역 변수다. 이미 선언된 전역 변수가 x가 있으므로 x 변수는 중복 선언된다.
  // 이는 의도치 않게 변수 값이 변경되는 부작용을 발생시킨다.
  var x = 10;
}

console.log(x); // 10
```

### 5. 렉시컬 스코프

프로그래밍 언어는 일반적으로 아래 2두 가지 방식 중 한 가지 방식으로 함수의 상위 스코프를 결정한다.

1. 함수를 어디서 호출했는지에 따라 함수의 상위 스코프를 결정한다. (동적 스코프)
2. 함수를 어디서 정의했는지에 따라 함수의 상위 스코프를 결정한다. (렉시컬 스코프 또는 정적 스코프)

자바스크립트를 비롯한 대부분의 프로그래밍 언어는 렉시컬 스코프를 따르므로 함수를 어디서 호출했는지가 아니라 함수를 어디서 정의했는지에 따라 상위 스코프를 결정한다.
함수가 호출된 위치는 상위 스코프 결정에 어떠한 영향도 주지 않는다. 즉, 함수의 상위 스코프는 언제나 자신이 정의된 스코프다.
